# poddock 要件定義（MVP）

## 1. 概要

本ドキュメントは、poddock MVP の要件定義をまとめたものである。  
本要件は「開発目的・スコープ定義書」を上位文書とし、  
実装判断・優先度決定・受け入れ基準の共通認識を目的とする。

poddock は、音声配信の「正本（Single Source of Truth）」となる  
**Headless Podcast Hosting / Audio CMS** として設計される。

---

## 2. 前提・思想

- poddock は「再生する場所」ではない
- 音声・メタ情報・RSSは poddock を正とする
- 配信先（Spotify / Apple 等）は従とする
- クローズド配信基盤との無理な連携は行わない
- 規約・権利的にグレーな機能は実装しない

---

## 3. 機能要件（Functional Requirements）

### 3.1 Podcast（番組）管理

#### 要件

- Podcast を作成・編集・削除できる
- Podcast には以下の情報を設定できる
  - タイトル
  - 説明文
  - カテゴリ
  - 言語
  - 著者名
  - explicit フラグ
  - カバーアート
  - 連絡先メールアドレス（配信先提出時に使用）

#### 受け入れ条件

- Podcast 作成時に一意なIDが発行される
- 必須項目未入力時は保存できない
- 設定内容がRSSに正しく反映される

---

### 3.2 Episode（エピソード）管理

#### 要件

- Podcast に紐づく Episode を作成・編集・削除できる
- Episode には以下の情報を設定できる
  - タイトル
  - 説明（show notes）
  - 公開日時
  - 公開状態（下書き / 公開）
  - 音声ファイル

#### 受け入れ条件

- Episode は必ず1つの Podcast に紐づく
- 下書き状態の Episode は RSS に含まれない
- 公開状態に変更すると RSS に即時反映される

---

### 3.3 音声ファイル管理

#### 対応形式（MVP）

- MP3（audio/mpeg）
- M4A（AAC, audio/mp4）
- WAV（audio/wav）

#### 要件

- Episode ごとに音声ファイルを1つアップロードできる
- 音声ファイルは安定したURLで配信可能とする

#### 制約

- 1 Episode = 1 audio file
- 動画コンテナ（mp4/mov 等）は非対応
- 再エンコードは MVP では行わない

#### 受け入れ条件

- アップロード後、音声ファイルのURLが取得できる
- RSS の `<enclosure>` に URL / MIME / file size が正しく出力される

---

### 3.4 RSS発行

#### 要件

- Podcast ごとに RSS フィードを自動生成する
- Apple Podcasts 互換（iTunes タグ）に対応する
- RSS は常に最新状態を返す

#### 受け入れ条件

- 公開 Episode のみが RSS に含まれる
- RSS URL は固定である
- Apple Podcasts Connect の要件を満たす

---

### 3.5 非公開RSS（限定配信）

#### 要件

- token 付き URL による非公開 RSS を発行できる
- 非公開 RSS は URL を知っているユーザーのみ取得可能とする

#### 制約

- 認証UI・ログイン機構は設けない
- token は推測困難な文字列とする

#### 受け入れ条件

- token なしでは RSS を取得できない
- 公開 RSS と非公開 RSS は独立して管理できる

---

### 3.6 配信先連携（半自動）

#### 対応ディレクトリ

- Apple Podcasts
- Spotify
- Amazon Music（Audible 含む）

#### 要件

- 配信先ごとに提出状況を管理できる
- RSS 提出を支援するウィザードを提供する
- RSS 要件チェック（バリデーション）を行う

#### 管理ステータス

- 未提出
- 提出済
- 公開中
- 要対応

#### 制約

- Amazon Music への配信を行う場合、Podcast に連絡先メールアドレスが設定されている必要がある
- 未設定の場合、提出ウィザードでエラーとして表示し、設定画面への導線を提示する

#### 受け入れ条件

- RSS URL をワンクリックでコピーできる
- 配信先ごとに状態が確認できる

---

### 3.7 管理画面

#### 要件

- 管理画面から以下を操作できる
  - Podcast 管理
  - Episode 管理
  - 配信先ステータス確認
  - RSS URL 確認

#### 制約

- 単一管理者を前提とする

#### 受け入れ条件

- 操作結果が即時反映される
- 管理画面のみで一連の操作が完結する

---

## 4. 非機能要件（Non-Functional Requirements）

### 4.1 可用性

- RSS および音声ファイルは常時取得可能であること
- 配信先クローラからのアクセスを想定する

### 4.2 パフォーマンス

- RSS 取得は通常 1 秒以内に応答する
- 音声配信は CDN 経由を前提とする

### 4.3 セキュリティ

- 非公開 RSS の token は十分な長さ・ランダム性を持つ
- 音声アップロードは認証済みユーザーのみ可能
- 管理画面は HTTPS 必須

### 4.4 拡張性

- Podcast / Episode 数の増加に耐えられる設計とする
- 将来的な分析・課金機能追加を阻害しない構造とする

### 4.5 運用・保守

- RSS 仕様変更時の影響範囲を限定できる構成とする
- 不正な RSS 状態を検知・修正しやすい設計とする

---

## 5. スコープ外（再掲）

- フル機能の音声再生アプリ
- 詳細アナリティクス（再生数・完走率等）
- 広告挿入・収益化
- 課金・サブスクリプション
- 自動文字起こし・AI要約
- 動画対応
- 複数ユーザー・権限管理
- クローズド音声プラットフォームとの連携

---

## 6. 要件判断ルール

- RSS の正本性を高める → 採用
- 配信制御・管理性を高める → 採用
- 再生体験に踏み込む → 対象外

---
